# -*- coding: utf-8 -*-
"""
–ú–æ–¥—É–ª—å –¥–ª—è –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ (RU/EN).
"""

TRANSLATIONS = {
    "ru": {
        "app_title": "Anki German Helper",
        "settings": "–ù–∞—Å—Ç—Ä–æ–π–∫–∏",
        "help": "–°–ø—Ä–∞–≤–∫–∞",
        "open_settings": "–û—Ç–∫—Ä—ã—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏",
        "play_audio": "–í–æ—Å–ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏ –∞—É–¥–∏–æ",
        "audio_enabled": "–û–∑–≤—É—á–∫–∞",
        "audio_enabled_tooltip": "–°–æ–∑–¥–∞–≤–∞—Ç—å –æ–∑–≤—É—á–∫—É –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –≤ Anki",
        "sound_source_original": "–û—Ä–∏–≥",
        "sound_source_translation": "–ü–µ—Ä–µ–≤–æ–¥",
        "sound_source_tooltip": "–í—ã–±–µ—Ä–∏—Ç–µ –∏—Å—Ç–æ—á–Ω–∏–∫ —Ç–µ–∫—Å—Ç–∞ –¥–ª—è –æ–∑–≤—É—á–∫–∏",
        "placeholder_german": "–ù–µ–º–µ—Ü–∫–∏–π —Ç–µ–∫—Å—Ç...",
        "placeholder_translation": "–ü–µ—Ä–µ–≤–æ–¥...",
        "placeholder_context": "–ö–æ–Ω—Ç–µ–∫—Å—Ç/–æ–±—ä—è—Å–Ω–µ–Ω–∏—è...",
        "generate": "–ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å",
        "cancel_generation": "–û—Ç–º–µ–Ω–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏",
        "auto_generate": "–ê–≤—Ç–æ",
        "auto_generate_tooltip": "–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–µ—Ä–µ–≤–æ–¥ –ø—Ä–∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–∏ —Ç–µ–∫—Å—Ç–∞",
        "clipboard_monitoring": "–ü–µ—Ä–µ—Ö–≤–∞—Ç –±—É—Ñ–µ—Ä–∞",
        "clipboard_monitoring_tooltip": "–í–∫–ª—é—á–∏—Ç—å/–≤—ã–∫–ª—é—á–∏—Ç—å –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –±—É—Ñ–µ—Ä–∞ –æ–±–º–µ–Ω–∞",
        "context_enabled": "–ö–æ–Ω—Ç–µ–∫—Å—Ç",
        "context_enabled_tooltip": "–í–∫–ª—é—á–∏—Ç—å –≥–µ–Ω–µ—Ä–∞—Ü–∏—é –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞/–æ–±—ä—è—Å–Ω–µ–Ω–∏–π",
        "deck_selection": "–í—ã–±–µ—Ä–∏—Ç–µ –∫–æ–ª–æ–¥—É",
        "deck_selection_tooltip": "–í—ã–±–µ—Ä–∏—Ç–µ –∫–æ–ª–æ–¥—É Anki –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∫–∞—Ä—Ç–æ—á–µ–∫",
        "refresh_decks": "–û–±–Ω–æ–≤–∏—Ç—å",
        "create_deck": "–°–æ–∑–¥–∞—Ç—å –∫–æ–ª–æ–¥—É",
        "add_to_anki": "–í Anki",
        "auto_add": "–ê–≤—Ç–æ",
        "auto_add_tooltip": "–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è—Ç—å –≤ Anki –ø–æ—Å–ª–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏",
        "cancel": "–û—Ç–º–µ–Ω–∞",
        "ok": "–û–ö",
        "yes": "–î–∞",
        "no": "–ù–µ—Ç",
        "error": "–û—à–∏–±–∫–∞",
        "warning": "–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ",
        "success": "–£—Å–ø–µ—Ö",
        "loading": "–ó–∞–≥—Ä—É–∑–∫–∞...",
        "anki_not_available": "AnkiConnect –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω",
        "decks_not_found": "–ö–æ–ª–æ–¥—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã",
        "new_deck_name": "–ù–∞–∑–≤–∞–Ω–∏–µ –Ω–æ–≤–æ–π –∫–æ–ª–æ–¥—ã:",
        "deck_created": "–ö–æ–ª–æ–¥–∞ '{name}' —Å–æ–∑–¥–∞–Ω–∞ –∏ –≤—ã–±—Ä–∞–Ω–∞.",
        "prompt_saved": "–ü—Ä–µ—Å–µ—Ç '{name}' —Å–æ—Ö—Ä–∞–Ω–µ–Ω.",
        "prompt_created": "–ü—Ä–µ—Å–µ—Ç '{name}' —Å–æ–∑–¥–∞–Ω.",
        "delete_prompt_confirm": "–£–¥–∞–ª–∏—Ç—å '{name}'?",
        "tab_audio": "–û–∑–≤—É—á–∫–∞",
        "tab_prompts": "–ü—Ä–æ–º–ø—Ç—ã",
        "tab_ai": "AI",
        "tab_font": "–®—Ä–∏—Ñ—Ç",
        "tab_theme": "–¢–µ–º–∞",
        "speed_label": "–°–∫–æ—Ä–æ—Å—Ç—å –æ–∑–≤—É—á–∫–∏:",
        "lang_label": "–Ø–∑—ã–∫ (lang):",
        "tld_label": "–î–æ–º–µ–Ω–∞ (tld):",
        "test_audio": "–¢–µ—Å—Ç –æ–∑–≤—É—á–∫–∏",
        "ai_provider_settings": "–ù–∞—Å—Ç—Ä–æ–π–∫–∏ AI –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞",
        "provider_label": "–ü—Ä–æ–≤–∞–π–¥–µ—Ä:",
        "ollama_local": "Ollama (–ª–æ–∫–∞–ª—å–Ω—ã–π AI)",
        "openrouter_cloud": "OpenRouter (–æ–±–ª–∞—á–Ω—ã–π AI)",
        "google_gemini": "Google AI (Gemini)",
        "server_url": "URL —Å–µ—Ä–≤–µ—Ä–∞:",
        "model_label": "–ú–æ–¥–µ–ª—å:",
        "openrouter_presets": "–ü—Ä–µ—Å–µ—Ç—ã:",
        "api_key_label": "API –ö–ª—é—á:",
        "check_connection": "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ",
        "connection_success": "–£—Å–ø–µ—à–Ω–æ",
        "connection_failed": "–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è",
        "font_family_label": "–°–µ–º–µ–π—Å—Ç–≤–æ —à—Ä–∏—Ñ—Ç–∞:",
        "font_size_label": "–†–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞:",
        "preview_text_label": "–ü—Ä–∏–º–µ—Ä —Ç–µ–∫—Å—Ç–∞:",
        "appearance_mode": "–†–µ–∂–∏–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è:",
        "color_theme": "–¶–≤–µ—Ç–æ–≤–∞—è —Ç–µ–º–∞:",
        "language_label": "–Ø–∑—ã–∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞:",
        "appearance_dark": "–¢–µ–º–Ω–∞—è",
        "appearance_light": "–°–≤–µ—Ç–ª–∞—è",
        "appearance_system": "–°–∏—Å—Ç–µ–º–Ω–∞—è",
        "theme_blue": "–°–∏–Ω—è—è",
        "theme_green": "–ó–µ–ª–µ–Ω–∞—è",
        "theme_dark_blue": "–¢–µ–º–Ω–æ-—Å–∏–Ω—è—è",
        "rename": "–ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å",
        "save": "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å",
        "new_prompt": "–ù–æ–≤—ã–π –ø—Ä–æ–º—Ç",
        "delete": "–£–¥–∞–ª–∏—Ç—å",
        "empty_field_warning": "–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç –¥–ª—è –æ–∑–≤—É—á–∫–∏.",
        "ai_not_configured": "AI –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω",
        "stop_btn": "–û—Ç–º–µ–Ω–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏",
        "pin_tooltip": "–ó–∞–∫—Ä–µ–ø–∏—Ç—å –ø–æ–≤–µ—Ä—Ö –æ–∫–æ–Ω",
        "help_tooltip": "–û—Ç–∫—Ä—ã—Ç—å —Å–ø—Ä–∞–≤–∫—É (–ë–ª–æ–∫–Ω–æ—Ç)",
        "ai_settings_btn_tooltip": "–ù–∞–∂–º–∏—Ç–µ –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ AI",
        "clipboard_indicator": "üëÅÔ∏è–ë—É—Ñ–µ—Ä",
        "prompt_label": "–ü—Ä–æ–º–ø—Ç: {name}",
        "translate_prompt_label": "–ü—Ä–æ–º–ø—Ç –ø–µ—Ä–µ–≤–æ–¥–∞:",
        "context_prompt_label": "–ü—Ä–æ–º–ø—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞:",
        "preset_label": "–ü—Ä–µ—Å–µ—Ç:",
        "current_model_label": "–¢–µ–∫—É—â–∞—è –º–æ–¥–µ–ª—å (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏):",
        "coming_soon": "–°–∫–æ—Ä–æ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ",
        "no_presets": "(–ù–µ—Ç –ø—Ä–µ—Å–µ—Ç–æ–≤)",
        "load_models_error": "–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –º–æ–¥–µ–ª–µ–π:",
        "no_api_key": "–ù–µ—Ç –∫–ª—é—á–∞",
        "enter_api_key_warning": "–í–≤–µ–¥–∏—Ç–µ API –∫–ª—é—á",
        "select_or_enter_manually": "üí° –í—ã–±–µ—Ä–∏—Ç–µ –∏–∑ —Å–ø–∏—Å–∫–∞ –∏–ª–∏ –≤–≤–µ–¥–∏—Ç–µ –≤—Ä—É—á–Ω—É—é. –ù–∞–∂–º–∏—Ç–µ ‚òÖ —á—Ç–æ–±—ã —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ –ø—Ä–µ—Å–µ—Ç—ã.",
    },
    "en": {
        "app_title": "Anki German Helper",
        "settings": "Settings",
        "help": "Help",
        "open_settings": "Open Settings",
        "play_audio": "Play Audio",
        "audio_enabled": "TTS",
        "audio_enabled_tooltip": "Create audio when adding to Anki",
        "sound_source_original": "Orig",
        "sound_source_translation": "Trans",
        "sound_source_tooltip": "Select source text for TTS",
        "placeholder_german": "German text...",
        "placeholder_translation": "Translation...",
        "placeholder_context": "Context/explanations...",
        "generate": "Generate",
        "cancel_generation": "Stop Generation",
        "auto_generate": "Auto",
        "auto_generate_tooltip": "Automatically generate translation on copy",
        "clipboard_monitoring": "Monitor",
        "clipboard_monitoring_tooltip": "Enable/disable clipboard monitoring",
        "context_enabled": "Context",
        "context_enabled_tooltip": "Enable context/explanation generation",
        "deck_selection": "Select Deck",
        "deck_selection_tooltip": "Select Anki deck for cards",
        "refresh_decks": "Refresh",
        "create_deck": "Create Deck",
        "add_to_anki": "To Anki",
        "auto_add": "Auto",
        "auto_add_tooltip": "Automatically add to Anki after generation",
        "cancel": "Cancel",
        "ok": "OK",
        "yes": "Yes",
        "no": "No",
        "error": "Error",
        "warning": "Warning",
        "success": "Success",
        "loading": "Loading...",
        "anki_not_available": "AnkiConnect unavailable",
        "decks_not_found": "Decks not found",
        "new_deck_name": "New deck name:",
        "deck_created": "Deck '{name}' created and selected.",
        "prompt_saved": "Preset '{name}' saved.",
        "prompt_created": "Preset '{name}' created.",
        "delete_prompt_confirm": "Delete '{name}'?",
        "tab_audio": "Audio",
        "tab_prompts": "Prompts",
        "tab_ai": "AI",
        "tab_font": "Font",
        "tab_theme": "Theme",
        "speed_label": "Speech Speed:",
        "lang_label": "Language (lang):",
        "tld_label": "TLD (domain):",
        "test_audio": "Test Audio",
        "ai_provider_settings": "AI Provider Settings",
        "provider_label": "Provider:",
        "ollama_local": "Ollama (local AI)",
        "openrouter_cloud": "OpenRouter (cloud AI)",
        "google_gemini": "Google AI (Gemini)",
        "server_url": "Server URL:",
        "model_label": "Model:",
        "openrouter_presets": "Presets:",
        "api_key_label": "API Key:",
        "check_connection": "Check Connection",
        "connection_success": "Success",
        "connection_failed": "Connection Failed",
        "font_family_label": "Font Family:",
        "font_size_label": "Font Size:",
        "preview_text_label": "Preview Text:",
        "appearance_mode": "Appearance Mode:",
        "color_theme": "Color Theme:",
        "language_label": "UI Language:",
        "appearance_dark": "Dark",
        "appearance_light": "Light",
        "appearance_system": "System",
        "theme_blue": "Blue",
        "theme_green": "Green",
        "theme_dark_blue": "Dark Blue",
        "rename": "rename",
        "save": "Save",
        "new_prompt": "New Prompt",
        "delete": "Delete",
        "empty_field_warning": "Enter text for audio.",
        "ai_not_configured": "AI not configured",
        "stop_btn": "Stop generation",
        "pin_tooltip": "Pin stay on top",
        "help_tooltip": "Open help folder (Notepad)",
        "ai_settings_btn_tooltip": "Click to configure AI",
        "clipboard_indicator": "üëÅÔ∏èClipboard",
        "prompt_label": "Prompt: {name}",
        "translate_prompt_label": "Translation Prompt:",
        "context_prompt_label": "Context Prompt:",
        "preset_label": "Preset:",
        "current_model_label": "Current model (used for generation):",
        "coming_soon": "Coming soon",
        "no_presets": "(No presets)",
        "load_models_error": "Error loading models:",
        "no_api_key": "No key",
        "enter_api_key_warning": "Enter API key",
        "select_or_enter_manually": "üí° Select from list or enter manually. Click ‚òÖ to save to presets.",
    }
}

class LocalizationManager:
    def __init__(self):
        self._language = "ru"

    @property
    def language(self):
        return self._language

    @language.setter
    def language(self, value):
        if value in TRANSLATIONS:
            self._language = value

    def get_text(self, key, **kwargs):
        text = TRANSLATIONS.get(self._language, TRANSLATIONS["ru"]).get(key, key)
        if kwargs:
            try:
                return text.format(**kwargs)
            except Exception:
                pass
        return text

localization_manager = LocalizationManager()
